{"ast":null,"code":"var _jsxFileName = \"/Users/letiescanciano/Desktop/MITxPRO/trackex-app/live-session/src/components/Transactions/List/index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { toDate } from \"date-fns\";\nimport styled from \"styled-components\";\nimport DeleteForeverIcon from \"@material-ui/icons/DeleteForever\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport Button from \"@material-ui/core/Button\";\nimport Input from \"@material-ui/core/Input\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport { transactionsAPI } from \"../../../services/transactions\";\nimport { TransactionDrawer } from \"../../Drawer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Table = styled.table`\n  width: 80%;\n  text-align: left;\n  padding: 16px 0;\n`;\n_c = Table;\nconst HeadCell = styled.td`\n  padding: 16px 0;\n  width: 20%;\n`;\n_c2 = HeadCell;\nconst TableCell = styled.td`\n  padding: 8px 0;\n  width: 23%;\n  &(:last-of-type) {\n    display: flex;\n    justify-content: flex-end;\n    width: 8%;\n  }\n`;\n_c3 = TableCell;\nconst Amount = styled.p`\n  color: ${({\n  type\n}) => type === \"expense\" ? \"#FF7661\" : \"#00E4C6\"};\n`;\n_c4 = Amount;\nconst Container = styled.div`\n  width: 100%;\n  padding: 64px;\n`;\n_c5 = Container;\nconst ActionsWrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n_c6 = ActionsWrapper;\nconst Main = styled.div`\n  width: 100%;\n  display: flex;\n  padding-top: 32px;\n`;\n_c7 = Main;\nconst FiltersContainer = styled.div`\n  width: 20%;\n`;\n_c8 = FiltersContainer;\nconst availableCategories = [{\n  value: \"eating_out\",\n  label: \"Eating out\",\n  id: 1\n}, {\n  value: \"clothes\",\n  label: \"Clothes\",\n  id: 2\n}, {\n  value: \"electronics\",\n  label: \"Electronics\",\n  id: 3\n}, {\n  value: \"groceries\",\n  label: \"Groceries\",\n  id: 4\n}, {\n  value: \"salary\",\n  label: \"Salary\",\n  id: 5\n}];\nconst availableTypes = [{\n  value: \"expense\",\n  label: \"Expense\",\n  id: 1\n}, {\n  value: \"income\",\n  label: \"Income\",\n  id: 2\n}]; // const TRANSACTIONS_LIST_QUERY = gql`\n//   query {\n//     transactions {\n//       id\n//       name\n//       amount\n//       date\n//       category {\n//         id\n//         label\n//         value\n//       }\n//       type {\n//         id\n//         label\n//         value\n//       }\n//     }\n//   }\n// `;\n\nconst TransactionsList = () => {\n  _s();\n\n  // const { loading, error, data } = useQuery(TRANSACTIONS_LIST_QUERY);\n  // console.log(\"data\", data);\n  // console.log(\"loading\", loading);\n  // console.log(\"error\", error);\n  const [transactions, setTransactions] = useState([]);\n  const [openDrawer, setOpenDrawer] = useState(false);\n  const [mode, setMode] = useState(\"add\");\n  const [selectedTransaction, setSelectedTransaction] = useState({});\n  const [search, setSearch] = useState(\"\");\n  const [filteredTransactions, setFilteredTransactions] = useState([]);\n  const [categories, setCategories] = useState(availableCategories.reduce((acc, category) => {\n    acc[category.value] = {\n      label: category.label,\n      checked: false\n    };\n    return acc;\n  }, {})); // {\n  //   eating_out: { label: 'label1', checked: true},\n  //   clothes: { label: 'label1', checked: true},\n  // }\n\n  const [types, setTypes] = useState(availableTypes.reduce((acc, type) => {\n    acc[type.value] = {\n      label: type.label,\n      checked: false\n    };\n    return acc;\n  }, {}));\n  useEffect(() => {\n    const getTransactions = async () => {\n      try {\n        const {\n          data,\n          status\n        } = await transactionsAPI.all();\n\n        if (status === 200) {\n          setTransactions(data);\n        }\n      } catch (e) {\n        console.log(\"err in read all\", e);\n      }\n    };\n\n    getTransactions();\n  }, []);\n  useEffect(() => {\n    setFilteredTransactions(transactions);\n  }, [transactions]);\n  useEffect(() => {\n    filterByName(search);\n  }, [search]);\n  useEffect(() => {\n    filterByCategory();\n  }, [categories]);\n  useEffect(() => {\n    filterByType();\n  }, [types]);\n  const formatter = new Intl.NumberFormat(\"en-US\", {\n    style: \"currency\",\n    currency: \"USD\",\n    minimumFractionDigits: 2\n  });\n\n  const handleDelete = async id => {\n    try {\n      const {\n        data,\n        status\n      } = await transactionsAPI.delete(id);\n      console.log(\"data\", data);\n      console.log(\"status\", status);\n\n      if (status === 200) {\n        const _transactions = [...transactions].filter(transaction => transaction.id !== id);\n\n        setTransactions(_transactions);\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const handleEdit = id => {\n    //in here we'll edit the selected transaction\n    console.log(\"edit id\", id); // 1. set mode to Edit\n\n    setMode(\"edit\"); // 2. I need to find the selected transaction in my transactions array\n\n    const foundTransaction = transactions.find(transaction => {\n      return transaction.id === id;\n    }); // 3. I need to setSelectedTransaction to the one I found (save it in my state)\n\n    setSelectedTransaction({ ...foundTransaction,\n      type: foundTransaction.type.value,\n      category: foundTransaction.category.value\n    }); // 4. open the drawer and fill out the form with the transaction data\n\n    setOpenDrawer(true);\n  };\n\n  const addTransactionToList = async transaction => {\n    var _availableCategories$, _availableTypes$find;\n\n    const newTransaction = { ...transaction,\n      category: (_availableCategories$ = availableCategories.find(cat => cat.value === transaction.category)) === null || _availableCategories$ === void 0 ? void 0 : _availableCategories$.id,\n      type: (_availableTypes$find = availableTypes.find(cat => cat.value === transaction.type)) === null || _availableTypes$find === void 0 ? void 0 : _availableTypes$find.id\n    };\n    console.log(newTransaction);\n\n    try {\n      const {\n        data,\n        status\n      } = await transactionsAPI.create(newTransaction); // console.log(\"status\", status);\n\n      console.log(\"data\", data);\n\n      if (status === 200) {\n        setTransactions([...transactions, { ...data\n        }]);\n      }\n    } catch (err) {\n      console.log(\"err in addTransaction\", err);\n    }\n  };\n\n  const editTransaction = transaction => {\n    // console.log(\"transaction\", transaction);\n    try {\n      const {\n        data,\n        status\n      } = transactionsAPI.update(transaction);\n\n      if (status === 200) {\n        // 1. Find the transaction index to edit in the array\n        const transactionIndex = transactions.findIndex(tr => tr.id === transaction.id); // 2. Make a copy of our transactions state\n\n        const _transactions = [...transactions]; // 3. Replace the transaction that we need to edit\n\n        _transactions[transactionIndex] = data; // console.log(\"_transactions\", _transactions);\n        // 4. Update our transactions (state) array\n\n        setTransactions(_transactions);\n      }\n    } catch (e) {\n      console.log(\"e\", e);\n    }\n  };\n\n  const filterByName = search => {\n    const _filteredTransactions = transactions.filter(transaction => {\n      return transaction.name.toLowerCase().includes(search.toLowerCase());\n    });\n\n    setFilteredTransactions(_filteredTransactions);\n  };\n\n  const filterByCategory = () => {\n    // we filter in our categories state object\n    // const checked = Object.keys(categories).filter(category=>{\n    //   return categories[category].checked === true\n    // })\n    const checked = Object.keys(categories).filter(category => categories[category].checked); // if no checkbox is selected --> original array\n    // if some checkbox is checked --> filter\n\n    if (checked.length === 0) {\n      // console.log(\"go back to original array\");\n      setFilteredTransactions(transactions);\n    } else {\n      const _filteredTransactions = transactions.filter(transaction => {\n        return categories[transaction.category].checked === true;\n      });\n\n      setFilteredTransactions(_filteredTransactions); // console.log(\"_filteredTransactions\", _filteredTransactions);\n    }\n  };\n\n  const filterByType = () => {\n    // we filter in our types state object\n    const checked = Object.keys(types).filter(type => types[type].checked); // if no checkbox is selected --> original array\n    // if some checkbox is checked --> filter\n\n    if (checked.length === 0) {\n      // console.log(\"go back to original array\");\n      setFilteredTransactions(transactions);\n    } else {\n      const _filteredTransactions = transactions.filter(transaction => {\n        return types[transaction.type].checked === true;\n      });\n\n      setFilteredTransactions(_filteredTransactions); // console.log(\"_filteredTransactions\", _filteredTransactions);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(ActionsWrapper, {\n      children: [/*#__PURE__*/_jsxDEV(FormControl, {\n        style: {\n          width: \"75%\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Input, {\n          id: \"search\",\n          value: search,\n          startAdornment: /*#__PURE__*/_jsxDEV(InputAdornment, {\n            position: \"start\",\n            children: /*#__PURE__*/_jsxDEV(SearchIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 15\n          }, this),\n          onChange: event => {\n            console.log(event.target.value);\n            setSearch(event.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: () => setOpenDrawer(true),\n        children: \"+ Add Transaction\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Main, {\n      children: [/*#__PURE__*/_jsxDEV(FiltersContainer, {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Filters\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Category\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 11\n        }, this), categories && Object.keys(categories).map(category => {\n          return /*#__PURE__*/_jsxDEV(FormControlLabel, {\n            control: /*#__PURE__*/_jsxDEV(Checkbox, {\n              checked: categories[category].checked,\n              onChange: event => {\n                const newCategoriesState = { ...categories,\n                  // make a copy of all the categories\n                  [category]: { //label: categories[category].label,\n                    ...categories[category],\n                    // we keep all the information of that category\n                    checked: event.target.checked // we update the \"checked\" property\n\n                  }\n                }; // console.log(\"newCategoriesState\", newCategoriesState);\n\n                setCategories(newCategoriesState);\n              },\n              name: category\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 21\n            }, this),\n            label: categories[category].label\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 17\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Types\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this), types && Object.keys(types).map(type => {\n          return /*#__PURE__*/_jsxDEV(FormControlLabel, {\n            control: /*#__PURE__*/_jsxDEV(Checkbox, {\n              checked: types[type].checked,\n              onChange: event => {\n                const newTypesState = { ...types,\n                  // make a copy of all the Types\n                  [type]: { //label: Types[type].label,\n                    ...types[type],\n                    // we keep all the information of that type\n                    checked: event.target.checked // we update the \"checked\" property\n\n                  }\n                };\n                console.log(\"newTypesState\", newTypesState);\n                setTypes(newTypesState);\n              },\n              name: type\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 355,\n              columnNumber: 21\n            }, this),\n            label: types[type].label\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 17\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this), transactions.length > 0 ? /*#__PURE__*/_jsxDEV(Table, {\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(HeadCell, {\n              children: \"Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(HeadCell, {\n              children: \"Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(HeadCell, {\n              children: \"Category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(HeadCell, {\n              children: \"Amount\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 384,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(HeadCell, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 385,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: filteredTransactions.map(({\n            id,\n            date,\n            name,\n            category,\n            type,\n            amount\n          }) => {\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                children: date\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 394,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: category.value\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 395,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: /*#__PURE__*/_jsxDEV(Amount, {\n                  type: type.value,\n                  children: formatter.format(amount)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 397,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 396,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                children: [/*#__PURE__*/_jsxDEV(EditIcon, {\n                  style: {\n                    marginRight: \"16px\"\n                  },\n                  onClick: () => {\n                    handleEdit(id);\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 402,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(DeleteForeverIcon, {\n                  style: {\n                    color: \"#FF7661\"\n                  },\n                  onClick: () => handleDelete(id)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 408,\n                  columnNumber: 25\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 23\n              }, this)]\n            }, id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 21\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 11\n      }, this) : \"Loading....\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 7\n    }, this), openDrawer && /*#__PURE__*/_jsxDEV(TransactionDrawer, {\n      mode: mode,\n      open: openDrawer,\n      onClose: () => setOpenDrawer(false),\n      transaction: selectedTransaction,\n      addTransaction: addTransactionToList,\n      editTransaction: editTransaction\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 294,\n    columnNumber: 5\n  }, this);\n};\n\n_s(TransactionsList, \"7HoiTT/W0BeV0yiLOYGaTE5QMAM=\");\n\n_c9 = TransactionsList;\nexport { TransactionsList };\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9;\n\n$RefreshReg$(_c, \"Table\");\n$RefreshReg$(_c2, \"HeadCell\");\n$RefreshReg$(_c3, \"TableCell\");\n$RefreshReg$(_c4, \"Amount\");\n$RefreshReg$(_c5, \"Container\");\n$RefreshReg$(_c6, \"ActionsWrapper\");\n$RefreshReg$(_c7, \"Main\");\n$RefreshReg$(_c8, \"FiltersContainer\");\n$RefreshReg$(_c9, \"TransactionsList\");","map":{"version":3,"sources":["/Users/letiescanciano/Desktop/MITxPRO/trackex-app/live-session/src/components/Transactions/List/index.jsx"],"names":["React","useState","useEffect","toDate","styled","DeleteForeverIcon","EditIcon","Button","Input","InputAdornment","FormControl","SearchIcon","FormControlLabel","Checkbox","transactionsAPI","TransactionDrawer","Table","table","HeadCell","td","TableCell","Amount","p","type","Container","div","ActionsWrapper","Main","FiltersContainer","availableCategories","value","label","id","availableTypes","TransactionsList","transactions","setTransactions","openDrawer","setOpenDrawer","mode","setMode","selectedTransaction","setSelectedTransaction","search","setSearch","filteredTransactions","setFilteredTransactions","categories","setCategories","reduce","acc","category","checked","types","setTypes","getTransactions","data","status","all","e","console","log","filterByName","filterByCategory","filterByType","formatter","Intl","NumberFormat","style","currency","minimumFractionDigits","handleDelete","delete","_transactions","filter","transaction","err","handleEdit","foundTransaction","find","addTransactionToList","newTransaction","cat","create","editTransaction","update","transactionIndex","findIndex","tr","_filteredTransactions","name","toLowerCase","includes","Object","keys","length","width","event","target","map","newCategoriesState","newTypesState","date","amount","format","marginRight","color"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { toDate } from \"date-fns\";\nimport styled from \"styled-components\";\n\nimport DeleteForeverIcon from \"@material-ui/icons/DeleteForever\";\nimport EditIcon from \"@material-ui/icons/Edit\";\nimport Button from \"@material-ui/core/Button\";\n\nimport Input from \"@material-ui/core/Input\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\n\nimport { transactionsAPI } from \"../../../services/transactions\";\n\nimport { TransactionDrawer } from \"../../Drawer\";\nconst Table = styled.table`\n  width: 80%;\n  text-align: left;\n  padding: 16px 0;\n`;\nconst HeadCell = styled.td`\n  padding: 16px 0;\n  width: 20%;\n`;\n\nconst TableCell = styled.td`\n  padding: 8px 0;\n  width: 23%;\n  &(:last-of-type) {\n    display: flex;\n    justify-content: flex-end;\n    width: 8%;\n  }\n`;\n\nconst Amount = styled.p`\n  color: ${({ type }) => (type === \"expense\" ? \"#FF7661\" : \"#00E4C6\")};\n`;\n\nconst Container = styled.div`\n  width: 100%;\n  padding: 64px;\n`;\n\nconst ActionsWrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst Main = styled.div`\n  width: 100%;\n  display: flex;\n  padding-top: 32px;\n`;\nconst FiltersContainer = styled.div`\n  width: 20%;\n`;\n\nconst availableCategories = [\n  { value: \"eating_out\", label: \"Eating out\", id: 1 },\n  { value: \"clothes\", label: \"Clothes\", id: 2 },\n  { value: \"electronics\", label: \"Electronics\", id: 3 },\n  { value: \"groceries\", label: \"Groceries\", id: 4 },\n  { value: \"salary\", label: \"Salary\", id: 5 },\n];\n\nconst availableTypes = [\n  { value: \"expense\", label: \"Expense\", id: 1 },\n  { value: \"income\", label: \"Income\", id: 2 },\n];\n\n// const TRANSACTIONS_LIST_QUERY = gql`\n//   query {\n//     transactions {\n//       id\n//       name\n//       amount\n//       date\n//       category {\n//         id\n//         label\n//         value\n//       }\n//       type {\n//         id\n//         label\n//         value\n//       }\n//     }\n//   }\n// `;\nconst TransactionsList = () => {\n  // const { loading, error, data } = useQuery(TRANSACTIONS_LIST_QUERY);\n  // console.log(\"data\", data);\n  // console.log(\"loading\", loading);\n  // console.log(\"error\", error);\n\n  const [transactions, setTransactions] = useState([]);\n  const [openDrawer, setOpenDrawer] = useState(false);\n  const [mode, setMode] = useState(\"add\");\n  const [selectedTransaction, setSelectedTransaction] = useState({});\n  const [search, setSearch] = useState(\"\");\n  const [filteredTransactions, setFilteredTransactions] = useState([]);\n\n  const [categories, setCategories] = useState(\n    availableCategories.reduce((acc, category) => {\n      acc[category.value] = { label: category.label, checked: false };\n      return acc;\n    }, {})\n  );\n\n  // {\n  //   eating_out: { label: 'label1', checked: true},\n  //   clothes: { label: 'label1', checked: true},\n  // }\n  const [types, setTypes] = useState(\n    availableTypes.reduce((acc, type) => {\n      acc[type.value] = { label: type.label, checked: false };\n      return acc;\n    }, {})\n  );\n\n  useEffect(() => {\n    const getTransactions = async () => {\n      try {\n        const { data, status } = await transactionsAPI.all();\n        if (status === 200) {\n          setTransactions(data);\n        }\n      } catch (e) {\n        console.log(\"err in read all\", e);\n      }\n    };\n    getTransactions();\n  }, []);\n\n  useEffect(() => {\n    setFilteredTransactions(transactions);\n  }, [transactions]);\n\n  useEffect(() => {\n    filterByName(search);\n  }, [search]);\n\n  useEffect(() => {\n    filterByCategory();\n  }, [categories]);\n\n  useEffect(() => {\n    filterByType();\n  }, [types]);\n  const formatter = new Intl.NumberFormat(\"en-US\", {\n    style: \"currency\",\n    currency: \"USD\",\n    minimumFractionDigits: 2,\n  });\n\n  const handleDelete = async (id) => {\n    try {\n      const { data, status } = await transactionsAPI.delete(id);\n      console.log(\"data\", data);\n      console.log(\"status\", status);\n      if (status === 200) {\n        const _transactions = [...transactions].filter(\n          (transaction) => transaction.id !== id\n        );\n        setTransactions(_transactions);\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const handleEdit = (id) => {\n    //in here we'll edit the selected transaction\n    console.log(\"edit id\", id);\n    // 1. set mode to Edit\n    setMode(\"edit\");\n    // 2. I need to find the selected transaction in my transactions array\n    const foundTransaction = transactions.find((transaction) => {\n      return transaction.id === id;\n    });\n    // 3. I need to setSelectedTransaction to the one I found (save it in my state)\n    setSelectedTransaction({\n      ...foundTransaction,\n      type: foundTransaction.type.value,\n      category: foundTransaction.category.value,\n    });\n    // 4. open the drawer and fill out the form with the transaction data\n    setOpenDrawer(true);\n  };\n  const addTransactionToList = async (transaction) => {\n    const newTransaction = {\n      ...transaction,\n      category: availableCategories.find(\n        (cat) => cat.value === transaction.category\n      )?.id,\n      type: availableTypes.find((cat) => cat.value === transaction.type)?.id,\n    };\n    console.log(newTransaction);\n\n    try {\n      const { data, status } = await transactionsAPI.create(newTransaction);\n      // console.log(\"status\", status);\n      console.log(\"data\", data);\n      if (status === 200) {\n        setTransactions([...transactions, { ...data }]);\n      }\n    } catch (err) {\n      console.log(\"err in addTransaction\", err);\n    }\n  };\n\n  const editTransaction = (transaction) => {\n    // console.log(\"transaction\", transaction);\n\n    try {\n      const { data, status } = transactionsAPI.update(transaction);\n      if (status === 200) {\n        // 1. Find the transaction index to edit in the array\n        const transactionIndex = transactions.findIndex(\n          (tr) => tr.id === transaction.id\n        );\n        // 2. Make a copy of our transactions state\n        const _transactions = [...transactions];\n        // 3. Replace the transaction that we need to edit\n        _transactions[transactionIndex] = data;\n\n        // console.log(\"_transactions\", _transactions);\n        // 4. Update our transactions (state) array\n        setTransactions(_transactions);\n      }\n    } catch (e) {\n      console.log(\"e\", e);\n    }\n  };\n\n  const filterByName = (search) => {\n    const _filteredTransactions = transactions.filter((transaction) => {\n      return transaction.name.toLowerCase().includes(search.toLowerCase());\n    });\n\n    setFilteredTransactions(_filteredTransactions);\n  };\n\n  const filterByCategory = () => {\n    // we filter in our categories state object\n\n    // const checked = Object.keys(categories).filter(category=>{\n    //   return categories[category].checked === true\n    // })\n    const checked = Object.keys(categories).filter(\n      (category) => categories[category].checked\n    );\n\n    // if no checkbox is selected --> original array\n    // if some checkbox is checked --> filter\n\n    if (checked.length === 0) {\n      // console.log(\"go back to original array\");\n      setFilteredTransactions(transactions);\n    } else {\n      const _filteredTransactions = transactions.filter((transaction) => {\n        return categories[transaction.category].checked === true;\n      });\n      setFilteredTransactions(_filteredTransactions);\n      // console.log(\"_filteredTransactions\", _filteredTransactions);\n    }\n  };\n\n  const filterByType = () => {\n    // we filter in our types state object\n    const checked = Object.keys(types).filter((type) => types[type].checked);\n\n    // if no checkbox is selected --> original array\n    // if some checkbox is checked --> filter\n\n    if (checked.length === 0) {\n      // console.log(\"go back to original array\");\n      setFilteredTransactions(transactions);\n    } else {\n      const _filteredTransactions = transactions.filter((transaction) => {\n        return types[transaction.type].checked === true;\n      });\n      setFilteredTransactions(_filteredTransactions);\n      // console.log(\"_filteredTransactions\", _filteredTransactions);\n    }\n  };\n\n  return (\n    <Container>\n      <ActionsWrapper>\n        <FormControl style={{ width: \"75%\" }}>\n          <Input\n            id='search'\n            value={search}\n            startAdornment={\n              <InputAdornment position='start'>\n                <SearchIcon />\n              </InputAdornment>\n            }\n            onChange={(event) => {\n              console.log(event.target.value);\n              setSearch(event.target.value);\n            }}\n          />\n        </FormControl>\n        <Button\n          variant='contained'\n          color='primary'\n          onClick={() => setOpenDrawer(true)}\n        >\n          + Add Transaction\n        </Button>\n      </ActionsWrapper>\n      <Main>\n        <FiltersContainer>\n          <h2>Filters</h2>\n          <h3>Category</h3>\n          {categories &&\n            Object.keys(categories).map((category) => {\n              return (\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      checked={categories[category].checked}\n                      onChange={(event) => {\n                        const newCategoriesState = {\n                          ...categories, // make a copy of all the categories\n                          [category]: {\n                            //label: categories[category].label,\n                            ...categories[category], // we keep all the information of that category\n                            checked: event.target.checked, // we update the \"checked\" property\n                          },\n                        };\n                        // console.log(\"newCategoriesState\", newCategoriesState);\n                        setCategories(newCategoriesState);\n                      }}\n                      name={category}\n                    />\n                  }\n                  label={categories[category].label}\n                />\n              );\n            })}\n          <h3>Types</h3>\n          {types &&\n            Object.keys(types).map((type) => {\n              return (\n                <FormControlLabel\n                  control={\n                    <Checkbox\n                      checked={types[type].checked}\n                      onChange={(event) => {\n                        const newTypesState = {\n                          ...types, // make a copy of all the Types\n                          [type]: {\n                            //label: Types[type].label,\n                            ...types[type], // we keep all the information of that type\n                            checked: event.target.checked, // we update the \"checked\" property\n                          },\n                        };\n                        console.log(\"newTypesState\", newTypesState);\n                        setTypes(newTypesState);\n                      }}\n                      name={type}\n                    />\n                  }\n                  label={types[type].label}\n                />\n              );\n            })}\n        </FiltersContainer>\n        {transactions.length > 0 ? (\n          <Table>\n            <thead>\n              <tr>\n                <HeadCell>Date</HeadCell>\n                <HeadCell>Name</HeadCell>\n                <HeadCell>Category</HeadCell>\n                <HeadCell>Amount</HeadCell>\n                <HeadCell></HeadCell>\n              </tr>\n            </thead>\n            <tbody>\n              {filteredTransactions.map(\n                ({ id, date, name, category, type, amount }) => {\n                  return (\n                    <tr key={id}>\n                      <TableCell>{date}</TableCell>\n                      <TableCell>{name}</TableCell>\n                      <TableCell>{category.value}</TableCell>\n                      <TableCell>\n                        <Amount type={type.value}>\n                          {formatter.format(amount)}\n                        </Amount>\n                      </TableCell>\n                      <TableCell>\n                        <EditIcon\n                          style={{ marginRight: \"16px\" }}\n                          onClick={() => {\n                            handleEdit(id);\n                          }}\n                        />\n                        <DeleteForeverIcon\n                          style={{ color: \"#FF7661\" }}\n                          onClick={() => handleDelete(id)}\n                        />\n                      </TableCell>\n                    </tr>\n                  );\n                }\n              )}\n            </tbody>\n          </Table>\n        ) : (\n          \"Loading....\"\n        )}\n      </Main>\n      {openDrawer && (\n        <TransactionDrawer\n          mode={mode}\n          open={openDrawer}\n          onClose={() => setOpenDrawer(false)}\n          transaction={selectedTransaction}\n          addTransaction={addTransactionToList}\n          editTransaction={editTransaction}\n        />\n      )}\n    </Container>\n  );\n};\n\nexport { TransactionsList };\n"]},"metadata":{},"sourceType":"module"}